I"ğ%<blockquote>
  <p>1ì°¨ ê³¼ì—…ìœ¼ë¡œ ì§„í–‰í–ˆë˜ ë§ì›ëŸ¬ë‹ë©”ì´íŠ¸ ë²„ê·¸ë“¤ì„ ìˆ˜ì •í•˜ê³  image lazy loading ë° webpack 5ë¥¼ ì¶”ê°€í–ˆë‹¤.</p>
</blockquote>

<p>ë§ì›ëŸ¬ë‹ë©”ì´íŠ¸ : <a href="https://umcondo.github.io/mangwon_running_mate">https://umcondo.github.io/mangwon_running_mate</a><br />
Github repository : <a href="https://github.com/umcondo/mangwon_running_mate">https://github.com/umcondo/mangwon_running_mate</a></p>

<h2 id="webpack-ë„ì…-ì´ìœ ">webpack ë„ì… ì´ìœ </h2>

<p>&nbsp;ë§ì›ëŸ¬ë‹ë©”ì´íŠ¸ëŠ” netlifyì— ë°°í¬ëœ ìƒíƒœì˜€ë‹¤. ì²˜ìŒ ë°°í¬í–ˆì„ë•ŒëŠ” ë¡œë”©ì‹œê°„ì´ ê¸¸ì§€ ì•Šì•˜ëŠ”ë°, ì‹œê°„ì´ ê°ˆìˆ˜ë¡ ë¡œë”©ì‹œê°„ì´ ê¸¸ì–´ì¡Œë‹¤. ë¦¬ì•¡íŠ¸ CRA, nextë“± ëª¨ë‘ ì›¹íŒ©ì„ ê¸°ë³¸ ë²ˆë“¤ëŸ¬ë¡œ ì‚¬ìš©í•œë‹¤. ì´ë²ˆ ê¸°íšŒì— webpackì´ë€ ë²ˆë“¤ëŸ¬ì™€ ì¹œí•´ì§€ê³ , ê¸°ì¡´ ì›¹ì•±ë„ ë Œë”ë§ ìµœì í™”í•˜ê¸° ìœ„í•´ webpackì„ ë„ì…í•˜ì˜€ë‹¤. </p>

<h2 id="ì„¤ì •-ê³¼ì •">ì„¤ì • ê³¼ì •</h2>

<p><a href="https://webpack.kr/concepts/">webpack ê³µì‹ ë¬¸ì„œ</a></p>

<p>&nbsp;ë¨¼ì € webpack ê³µì‹ë¬¸ì„œì—ì„œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ì „ê¹Œì§€ íŠœí† ë¦¬ì–¼ì„ ë‘ ë²ˆ ë°˜ë³µí–ˆë‹¤. ê·¸ëŸ¬ë©´ì„œ ìµœê·¼ ê°œë°œì¤‘ì¸ ì •ì  ë©€í‹°í˜ì´ì§€ ì‚¬ì´íŠ¸ì— ì ìš©í•´ë³´ë©° ìµí˜”ë‹¤.
ê·¸ëŸ¬ê³  ë‘ë²ˆì§¸ë¡œ ë§ˆí¬ëŸ¬ë‹ë©”ì´íŠ¸ì— ì ìš©í–ˆë‹¤.</p>
<p><br /></p>
<p>&nbsp;cssíŒŒì¼ì„ ëª¨ë“ˆí™”í•˜ê³  ë¹Œë“œì‹œ ë”°ë¡œ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ css-loaderì™€ MiniCssExtractPluginì„ ì‚¬ìš©í–ˆë‹¤.
ê¸°ì¡´ index.htmlì„ ìƒˆë¡œ ë¹Œë“œëœ css, js, asset(img ë“±)ê³¼ ì—°ê²°ëœ ìƒˆë¡œìš´ index.htmlì„ ë§Œë“¤ê¸° ìœ„í•´ html-loaderì™€ HtmlWebpackPluginì„ ì‚¬ìš©í–ˆë‹¤.
html-loaderëŠ” ê¸°ì¡´ htmlíŒŒì¼ì„ ëª¨ë“ˆë¡œ ìƒê°í•˜ê³  íŒŒì¼ì•ˆì— ë§í¬ëœ ëª¨ë“  ì• ì…‹ë“¤ì„ ìƒˆë¡œ ë¹Œë“œí•´ì£¼ê¸° ë•Œë¬¸ì— í¸ë¦¬í–ˆë‹¤.
js, css, html íŒŒì¼ì„ ì••ì¶•í•˜ê¸° ìœ„í•´ TerserPlugin, HtmlMinimizerPlugin, CssMinimizerPluginì„ ì‚¬ìš©í–ˆë‹¤. TerserPluginëŠ” jsíŒŒì¼ ë‚œë…í™”ê¹Œì§€ í•´ì£¼ì—ˆë‹¤.
</p>
<p><br /></p>
<p>&nbsp;vanilla jsë¡œ ê°œë°œí–ˆì§€ë§Œ const, let, arrow functionë“± es6ë¬¸ë²•ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§•ì„ ìœ„í•´ es6ë¬¸ë²•ì„ ì´ì „ jsë¬¸ë²•ìœ¼ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§ í•´ì£¼ëŠ” babelì„ ì‚¬ìš©í•˜ì˜€ë‹¤. webpackì˜ babel-loaderë¥¼ í†µí•´ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
<p><br /></p>
<p>&nbsp;ë°°í¬ë¥¼ netlifyë¡œ í•˜ê³  ìˆì—ˆë‹¤. ê¸°ì¡´ì—ëŠ” root directoryì˜ index.htmlì„ í™œìš©í–ˆì—ˆëŠ”ë°, ì›¹íŒ© ë¹Œë“œ í›„ì—” dist/index.htmlë¥¼ ë°°í¬í•´ì•¼í–ˆë‹¤. netlifyì—ì„œ Build &amp; deploy tap -&gt; Build settings íƒ­ì—ì„œ Publish directoryë¥¼ dist, build commandë¥¼ npm run buildë¡œ í•˜ì—¬ ë°°í¬ í´ë”ë¥¼ ë³€ê²½í•˜ê³  ë¹Œë“œë¥¼ ìë™í™”í•˜ì˜€ë‹¤.</p>

<h2 id="ëŠë‚€-ì ">ëŠë‚€ ì </h2>

<p>&nbsp;ëª¨ë“ˆ ë²ˆë“¤ë§ì´ ë­”ì§€ ì›¹íŒ©ì´ ì™œ ì¢‹ì€ì§€ì— ëŒ€í•´ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. entry, output, loader, pluginì´ ë­”ì§€ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. ì›¹íŒ©ìœ¼ë¡œ js, css, html íŒŒì¼ ëª¨ë‘ ì‰½ê²Œ ì••ì¶• ì‹œí‚¬ ìˆ˜ ìˆì—ˆë‹¤. ì›¹íŒ© ê³µì‹ë¬¸ì„œê°€ í•œê¸€í™”ë„ ë˜ì–´ìˆê³ , ë”°ë¼í•˜ê¸°ë„ ì‰½ê²Œ ì˜ ë˜ì–´ìˆì–´ì„œ ìƒê°ë³´ë‹¤ ëœ í—¤ë§¸ë‹¤. ë‹¤ë¥¸ ì‚¬ì´íŠ¸ë³´ëŠ” ê²ƒë³´ë‹¤ ì—­ì‹œ ê¸°ë³¸ì€ ê³µì‹ë¬¸ì„œêµ¬ë‚˜ ëŠê¼ˆë‹¤. ì›¹íŒ©ì„ ì´ìš©í•´ì„œ êµ¬í˜„ í•œ ë‚´ìš©ì„ ì „ë¶€ ì´í•´í•˜ê³  ì“°ì§„ ëª»í–ˆë‹¤. ì•ìœ¼ë¡œë„ ì›¹íŒ© ì„¤ì •ì„ í•´ë³´ë©´ì„œ ìµìˆ™í•´ì§€ê³  ë” ìì„¸íˆ ê³µë¶€í•´ì•¼ê² ë‹¤.. ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, ì´ë¯¸ì§€ ìš©ëŸ‰ ì¶•ì†Œ ë“±ì˜ ë” ë§ì€ ìµœì í™” ê¸°ë²•ì´ ìˆì—ˆì§€ë§Œ ì°¨ê·¼ì°¨ê·¼ ì•Œì•„ê°€ë³´ë ¤ê³  í•œë‹¤.</p>

<blockquote>
  <p>ì‹œí–‰ì°©ì˜¤ë¥¼ ê±°ì¹œë§Œí¼ ì¢‹ì€ íˆ´ì„ ìµíŒ ê²ƒ ê°™ì•„ ë³´ëŒì´ ìˆë‹¤ !</p>
</blockquote>

<h2 id="webpackconfigjs-code">webpack.config.js code</h2>

<pre>
<code>
const path = require("path");
// css ìµœì í™” í”ŒëŸ¬ê·¸ì¸
const MiniCssExtractPlugin = require("mini-css-extract-plugin");
const CssMinimizerPlugin = require("css-minimizer-webpack-plugin");
// js minimize
const TerserPlugin = require("terser-webpack-plugin");
// html minimize
const HtmlMinimizerPlugin = require("html-minimizer-webpack-plugin");
// ë²ˆë“¤ë§ëœ ëª¨ë“ˆë“¤ ì°¸ì¡°í•˜ëŠ” html íŒŒì¼ ìë™ ë¹Œë“œí•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  //   mode: process.env.NODE_ENV,
  mode: "production",
  devtool: "hidden-source-map", // ë°°í¬ìš© ë¹Œë“œíˆ´ ê°œë°œì¼ë• evalì„ ì“°ì
  devServer: {
    static: {
      directory: path.join(__dirname, "dist"),
    },
    compress: true,
    port: 9000,
  },
  entry: {
    style: [
      "./asset/css/default.css", // ìˆœì„œëŒ€ë¡œ ì½ëŠ”ë‹¤. ìˆœì„œ ìœ ì˜
      "./asset/css/result.css",
      "./asset/css/mobile.css",
    ],
    main: "./asset/js/index.js",
  },
  output: {
    filename: "[name].min.js",
    path: path.resolve(__dirname, "dist"),
    clean: true, // ì•ˆì“°ëŠ” ë¹Œë“œíŒŒì¼ ì‚­ì œ
    assetModuleFilename: "asset/[name].[hash][ext]",
    library: { name: "[name]", type: "var" },
  },

  module: {
    rules: [
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, "css-loader"],
      },
      // ì‚¬ì§„íŒŒì¼ ëª¨ë“ˆí™”
      {
        test: /\.(png|svg|jpg|jpeg|gif)$/i,
        type: "asset/resource",
      },
      {
        test: /\.html$/,
        loader: "html-loader",
      },
      // babel
      {
        test: /\.m?js$/,
        exclude: /(node_modules|bower_components)/,
        use: {
          loader: "babel-loader",
          options: {
            presets: ["@babel/preset-env"],
          },
        },
      },
    ],
  },
  optimization: {
    // ì¤‘ë³µ ì½”ë“œëŠ” ë²ˆë“¤ë¡œ ë§Œë“¬
    splitChunks: {
      chunks: "all",
    },
    minimize: true,
    minimizer: [
      new CssMinimizerPlugin(),
      new TerserPlugin({ extractComments: false }), // license comment ì•ˆë‚˜ì˜¤ê²Œ
      new HtmlMinimizerPlugin(),
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: "[name].min.css",
    }),
    new HtmlWebpackPlugin({
      filename: "index.html", // ë¹Œë“œ í›„ íŒŒì¼ ì´ë¦„
      template: "./index.html", // ê¸°ì¡´ ë¹Œë“œí•˜ê³  ì‹¶ì€ html
      inject: true, // ê¸°ë³¸ê°’ true headì— deferë¡œ js script ì‚½ì…
    }),
  ],
  performance: { hints: false }, // ë¹Œë“œíŒŒì¼ ìš©ëŸ‰ ì œí•œì´ˆê³¼ ì•Œë¦¼ ë¬´ì‹œ
};

</code>
</pre>

<h2 id="ì›¹íŒ©-ì„¤ì •-ì¤‘-ì´ìŠˆ">ì›¹íŒ© ì„¤ì • ì¤‘ ì´ìŠˆ</h2>

<ol>
  <li>ë¹Œë“œí•˜ê³  ì‹¶ì€ íŒŒì¼ë“¤ì€ jsíŒŒì¼(ëª¨ë“ˆ)ë¡œ ë§Œë“¤ì–´ì•¼í•œë‹¤. ì›¹íŒ©ì€ jsë§Œ ì•Œì•„ë¨¹ëŠ”ë‹¤. loaderëŠ” ë‹¤ë¥¸ ê°ì¢… íŒŒì¼ë“¤ì„ jsëª¨ë“ˆí™” í•´ì£¼ë¯€ë¡œ loaderë¥¼ ì´ìš©í•´ css, html, img, mp4 ë“±ë“±ì„ moduleí™” í•˜ì
<br /><br /></li>
  <li>ë¹Œë“œë˜ëŠ” assetë“¤ì˜ íŒŒì¼ëª…ê³¼ ë¹Œë“œ í´ë”ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ output.assetModuleFilenameë¥¼ ì„¤ì •í•´ì£¼ì—ˆë‹¤.
<br /><br /></li>
  <li>TerserPluginì„ ë‹¤ë¥¸ ì˜µì…˜ ì‚¬ìš©ì—†ì´ ì‚¬ìš©í•˜ë©´ ë¹Œë“œ í›„ license comment íŒŒì¼ë“¤ì´ ìƒê¸´ë‹¤. TerserPlugin({ extractComments: false })ë¥¼ ì¶”ê°€í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.
<br /><br /></li>
  <li>devtool í”„ë¡œí¼í‹°ì— productionì—ëŠ” â€œhidden-source-mapâ€, developmentì—ëŠ” â€œevalâ€ì„ ì“´ë‹¤. ì´ëŠ” ë¹Œë“œ ì†ë„, ë¹Œë“œ í˜•íƒœì™€ ê´€ë ¨ìˆë‹¤. ìì„¸íˆëŠ” ê³µë¶€ê°€ ë” í•„ìš”í•˜ë‹¤.
<br /><br /></li>
  <li>ì¹´ì¹´ì˜¤ë§µ ì¶”ê°€ ê¸°ëŠ¥ì„ ê°€ì§„ ë²„íŠ¼ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ htmlì— inline styleë¡œ javascript í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ë¶€ë¶„ì´ ìˆë‹¤. ì›¹íŒ©ìœ¼ë¡œ ë¹Œë“œ í›„ ì´ ë¶€ë¶„ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ì˜¤ë¥˜ê°€ ìˆì—ˆë‹¤.</li>
</ol>

<h3 id="ì½”ë“œ">ì½”ë“œ</h3>

<pre>
<code>
    // main.js 
    
    ... class="overlay_toggle_btn" onclick="toggleBtn()"&gt;`;

    ...
    function toggleBtn() {
      // í•¨ìˆ˜ êµ¬í˜„ ë‚´ìš©
    }
    ...
</code>
</pre>

<ul>
  <li>outputì˜ libraryì†ì„±ì„ ì´ìš©í•´ í•´ê²°í•´ì˜€ë‹¤. libraryë¥¼ í†µí•´ mainëª¨ë“ˆì— ìˆëŠ” í•¨ìˆ˜ë¥¼ exportí•˜ê³  ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í–ˆë‹¤. ë˜í•œ onclickì—ì„œ onClickìœ¼ë¡œ ë³€ê²½í–ˆë‹¤.
jsëª¨ë“ˆì´ë¯€ë¡œ jsíŒŒì¼ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ì“°ëŠ” ë¬¸ë²•ìœ¼ë¡œ ë°”ê¿”ì•¼í•˜ëŠ” ë“¯í•˜ë‹¤. <a href="https://webpack.kr/configuration/output/#outputlibrary">webpackê³µì‹ë¬¸ì„œ</a>, <a href="https://stackoverflow.com/questions/58782902/html-inline-javascript-with-webpack">stackoverflow</a>ë¥¼ ì°¸ê³ í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.</li>
</ul>

<h3 id="í•´ê²°-ì½”ë“œ">í•´ê²° ì½”ë“œ</h3>

<pre>
<code>
    // webpack.config.js
    ...
    output: {
        ...
        library: { name: "[name]", type: "var" },
      },
    ...

    // main.js

    ... class="overlay_toggle_btn" onClick="main.toggleBtn()"&gt;`;

    ...
    export function toggleBtn() {
      // í•¨ìˆ˜ êµ¬í˜„ ë‚´ìš©
    }
    ...
</code>
</pre>

<h2 id="ë§ì›-ëŸ¬ë‹-ë©”ì´íŠ¸-ì¶”ê°€ëœ-ì -ë°-ë²„ê·¸-ìˆ˜ì •-ë‚´ì—­">ë§ì› ëŸ¬ë‹ ë©”ì´íŠ¸ ì¶”ê°€ëœ ì  ë° ë²„ê·¸ ìˆ˜ì • ë‚´ì—­</h2>

<h3 id="ì¶”ê°€ëœ-ì ">ì¶”ê°€ëœ ì </h3>

<ul>
  <li>image lazy loading</li>
  <li>webpack 5
    <ul>
      <li>css, html, js bundling, minimize</li>
      <li>js uglify</li>
      <li>babel</li>
    </ul>
  </li>
</ul>

<h3 id="ë²„ê·¸-ìˆ˜ì •">ë²„ê·¸ ìˆ˜ì •</h3>

<ul>
  <li>ì´ìŠˆ : ê²°ê³¼í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì´ìš© ì‹œ, ì¹´ì¹´ì˜¤ë§µì´ í™•ëŒ€ë˜ê±°ë‚˜ ì¶•ì†Œë¨</li>
  <li>ì§„ë‹¨ : ì¹´ì¹´ì˜¤ë§µ ìŠ¤í¬ë¡¤, ë“œë˜ê·¸ ì˜µì…˜ true</li>
  <li>í•´ê²° : map.setDraggable(false); map.setZoomable(false); ì˜µì…˜ ì¶”ê°€
<br /><br /></li>
  <li>ì´ìŠˆ : ê²°ê³¼ ì• ë‹ˆë©”ì´ì…˜ ë¡œë”© ì‹œ ì œëª©ì´ ì„¸ë¡œë¡œ ë³´ì¸ í›„ ìœ„ì¹˜ê°€ ì¬ì¡°ì •ë¨</li>
  <li>ì§„ë‹¨ : position: absoluteë¡œ ì†ì„±ìœ¼ë¡œ ì¸í•´, ì´ë¯¸ì§€ê°€ ë¡œë”©ë˜ê¸° ì „ì— ì˜ëª»ëœ ìœ„ì¹˜ì— ë Œë”ë§ë¨</li>
  <li>í•´ê²° : position: relativeë¡œ ë³€ê²½ í›„ bottom ì†ì„± ë³€ê²½
<br /><br /></li>
  <li>ì´ìŠˆ : ë²„íŠ¼ì— ê¸€ì ì…ë ¥ì‹œ ìƒ, í•˜ë‹¨ ì—¬ë°±ê°„ê²©ì´ ê· ì¼í•˜ì§€ ëª»í•¨</li>
  <li>ì§„ë‹¨ : í°íŠ¸ ìì²´ì ìœ¼ë¡œ ìƒ, í•˜ë‹¨ ì—¬ë°±ì„ ê°€ì§</li>
  <li>í•´ê²° : line-height:0 ìœ¼ë¡œ í•˜ì—¬ í°íŠ¸ ì—¬ë°±ì„ ì—†ì• ê³  ë²„íŠ¼ ìì²´ì˜ íŒ¨ë”©ì„ ì¶”ê°€í•¨</li>
</ul>
:ET